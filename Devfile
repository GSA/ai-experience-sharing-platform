schemaVersion: 2.1.0
metadata:
  name: ai-experience-sharing-platform
  version: 2.1.0
 projects:
  - name: api-host
    clonePath: go/src/github.com/gsa/ai-experience-sharing-platform
    git:
      remotes:
        origin: "https://github.com/GSA/ai-experience-sharing-platform.git"
      checkoutFrom:
        revision: containerization
components:
  - name: strapi
    container:
      image: strapi/strapi:3.6.8
      mountSources: true
      command: ['sleep', 'infinity']
commands:
  - id: Build and run
    exec:
      component: strapi
      commandLine: "cd ui && yarn && yarn build && cd ../cms && cp -R ../ui/build/* ./public && npm i && npm run build"
      workingDir: "${PROJECTS_ROOT}/src/github.com/gsa/ai-experience-sharing-platform"
